<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:devExpressControls="clr-namespace:DevExpress.Maui.Controls;assembly=DevExpress.Maui.Controls"
             xmlns:controls="clr-namespace:GasMatic.Mobile.Views.Settings.Controls"
             xmlns:mauiLoc="clr-namespace:Localization.Maui;assembly=Localization.Maui"
             xmlns:viewModels="clr-namespace:GasMatic.Client.Core.ViewModels;assembly=GasMatic.Client.Core"
             x:Class="GasMatic.Mobile.Views.Settings.SettingsPage"
             x:DataType="viewModels:SettingsViewModel">

    <!-- ReSharper disable Xaml.InvalidType -->
    <Grid>
        <TableView Intent="Settings">
            <TableRoot>
                <TableSection Title="{mauiLoc:Translate PreferencesLabel}">
                    <!-- <SwitchCell Text="Dark Mode" -->
                    <!--             On="True" -->
                    <!--             OnColor="MediumPurple" /> -->
                    <ImageCell Text="{mauiLoc:Translate ChangeLanguage}"
                               Detail="{Binding CurrentLanguage}"
                               ImageSource="icon_language.png"
                               Command="{Binding ShowChangeLanguageSheetCommand}" />
                </TableSection>
                <TableSection Title="{mauiLoc:Translate GasVolumeLabel}">
                    <ImageCell Text="{mauiLoc:Translate NominalPipeSizeLinkLabel}"
                               Detail="{mauiLoc:Translate BrowserHint}"
                               ImageSource="icon_link.png"
                               Command="{Binding OpenNpsWebLinkCommand}" />
                </TableSection>
                <TableSection Title="Data">
                    <ImageCell Text="{mauiLoc:Translate DeleteAllDataLabel}"
                               Detail="{mauiLoc:Translate DeleteAllDataHint}"
                               ImageSource="icon_folder_delete.png"
                               Command="{Binding ShowDeleteDataSheetCommand}" />
                </TableSection>
            </TableRoot>
        </TableView>

        <!-- Change Language Sheet -->
        <devExpressControls:BottomSheet State="{Binding ChangeLanguageSheetState }">
            <controls:LanguageCollectionView />
        </devExpressControls:BottomSheet>

        <!-- Delete All Data Sheet -->
        <devExpressControls:BottomSheet State="{Binding DeleteDataSheetState}">
            <Grid>
                <controls:DeleteAllDataView />
                <ActivityIndicator IsRunning="{Binding IsLoading}"
                                   IsVisible="{Binding IsLoading}"
                                   HeightRequest="50" />
            </Grid>

        </devExpressControls:BottomSheet>
    </Grid>
</ContentPage>